(this["webpackJsonpprogress-crm"]=this["webpackJsonpprogress-crm"]||[]).push([[0],{115:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"signin",(function(){return N})),n.d(r,"signout",(function(){return E}));var a=n(0),c=n(50),s=n.n(c),o=n(29),i=n(8),u=n(10),p=n(7),j=n(103),b=n(19),l=n(20),d=n(22),h=n(21),O=(n(115),n(3)),f=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderLinks",value:function(){return this.props.userID?Object(O.jsxs)("div",{children:[Object(O.jsx)(o.b,{to:"/dashboard",children:"Dashboard"}),Object(O.jsx)(o.b,{to:"/signout",children:"Sign out"})]}):Object(O.jsx)("div",{children:Object(O.jsx)(o.b,{to:"/signin",children:"Sign in"})})}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"header",children:[Object(O.jsx)(o.b,{to:"/",children:"Home"}),this.renderLinks()]})}}]),n}(a.Component);var v=Object(u.b)((function(e){return{userID:e.auth.userID}}))(f),m=function(e){var t=e.children;return Object(O.jsxs)("div",{children:[Object(O.jsx)(v,{}),t]})},y=n(238),g=n(237),x=n(70),D=n.n(x),I=n(105),w=n(71),k=n.n(w),S="https://still-term-0a01.anayia.workers.dev/?https://progress.oncloud.gr/s1services",_="auth_get_clientid",C="auth_get_userid",M="auth_error",N=function(e,t){return function(){var n=Object(I.a)(D.a.mark((function n(r){var a,c;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,k.a.post(S,{service:"login",username:"progressinc",password:"progressinc1@3$56",appID:"1001",company:"1",branch:"1000",module:"0",refID:"1111"});case 3:return a=n.sent,n.next=6,k.a.post(S,{service:"SqlData",clientID:a.data.clientID,appID:"1001",SqlName:"6100",param1:e.username,param2:e.password});case 6:c=n.sent,r({type:_,payload:a.data.clientID}),r({type:C,payload:c.data.rows[0].users}),localStorage.setItem("userID",c.data.rows[0].users),t(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(0),r({type:M,payload:"Wrong credentials"});case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}()},E=function(){return localStorage.removeItem("userID"),{type:C,payload:""}},A=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(b.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(t){e.props.signin(t,(function(){e.props.history.push("/dashboard")}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(O.jsxs)("form",{onSubmit:e(this.onSubmit),children:[Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("label",{children:"Username"}),Object(O.jsx)(y.a,{name:"username",type:"text",component:"input",autoComplete:"none"})]}),Object(O.jsxs)("fieldset",{children:[Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)(y.a,{name:"password",type:"password",component:"input",autoComplete:"none"})]}),Object(O.jsx)("button",{children:"Sign in"}),Object(O.jsx)("div",{children:this.props.errorMessage})]})}}]),n}(a.Component);var q=Object(p.d)(Object(u.b)((function(e){return{errorMessage:e.auth.errorMessage}}),r),Object(g.a)({form:"signin"}))(A),L=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.signout()}},{key:"render",value:function(){return Object(O.jsx)("div",{children:"Sorry to see you go"})}}]),n}(a.Component),U=Object(u.b)(null,r)(L),J=n(23),P=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(O.jsx)("div",{children:"Dashboard page"})}}]),n}(a.Component),T=function(e){var t=function(t){Object(d.a)(r,t);var n=Object(h.a)(r);function r(){return Object(b.a)(this,r),n.apply(this,arguments)}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.shouldNavigateAway()}},{key:"componentDidUpdate",value:function(){this.shouldNavigateAway()}},{key:"shouldNavigateAway",value:function(){this.props.auth||this.props.history.push("/")}},{key:"render",value:function(){return Object(O.jsx)(e,Object(J.a)({},this.props))}}]),r}(a.Component);return Object(u.b)((function(e){return{auth:e.auth.userID}}))(t)}(P),W=n(239),X={clientID:"",userID:"",errorMessage:""},H=Object(p.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(J.a)(Object(J.a)({},e),{},{clientID:t.payload});case C:return Object(J.a)(Object(J.a)({},e),{},{userID:t.payload});case M:return Object(J.a)(Object(J.a)({},e),{},{errorMessage:t.payload});default:return e}},form:W.a}),R=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.d,V=Object(p.e)(H,{auth:{userID:localStorage.getItem("userID")}},R(Object(p.a)(j.a)));s.a.render(Object(O.jsx)(u.a,{store:V,children:Object(O.jsx)(o.a,{children:Object(O.jsxs)(m,{children:[Object(O.jsx)(i.a,{exact:!0,path:"/",component:function(){return Object(O.jsx)("h3",{children:"Welcome!"})}}),Object(O.jsx)(i.a,{path:"/signin",component:q}),Object(O.jsx)(i.a,{path:"/signout",component:U}),Object(O.jsx)(i.a,{path:"/dashboard",component:T})]})})}),document.querySelector("#root"))}},[[236,1,2]]]);
//# sourceMappingURL=main.796be015.chunk.js.map